<div id="image_gallery">
<style>

img {
    display: none;
}


img#1 {
    display: block;
}

</style>

<script type="text/javascript">

//initialisation
window.onhashchange = init;
window.onload = init;

function init() {
    var url_parts = document.URL.split('#');
    if (!window.location.hash) {
        show_image('i1');
    } else {
        img = 'i'+window.location.hash[1]
        show_image(img);
    }
}

function show_image(id) {
    var images = document.getElementsByTagName('img');
    [].forEach.call(images, function (image, index) {
        if (image.attributes.id.value === id) {
            image.style.display = 'block';
        } else {
            image.style.display = 'none';
        }
    });
}

</script>

{% for image in page.images %}
    <img id="i{{ forloop.index }}" src="{{ image[0] | prepend: site.baseurl }}" alt="{{ image[1] }}"/>
{% endfor %}

<br/>
<p>
    {% for image in page.images %}
        <a id="l{{ forloop.index }}" href="#{{ forloop.index }}" >{{ forloop.index }}</a>
    {% endfor %}
</p>
</div>
